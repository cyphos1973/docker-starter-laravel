<VirtualHost *:80>

        ServerAdmin gilles.bouchonneau@gmail.com
        Define server_name laravel.local
        Define container_name docker-starter-laravel
        Define basedocroot  /home/wwwroot/app/public
        Define docrootweb   ${basedocroot}/
        Define APACHE_LOG_DIR   /var/log/apache2/

        <FilesMatch .php$>
         SetHandler "proxy:fcgi://${container_name}_php:9000"
        </FilesMatch>

        ServerName ${server_name}
        DocumentRoot ${docrootweb}
        ErrorLog ${APACHE_LOG_DIR}/${container_name}_error.log
        CustomLog ${APACHE_LOG_DIR}/${container_name}_access.log Combined

        RewriteEngine On
        RewriteCond %{HTTP:Authorization} ^(.*)
        RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]

        <Directory ${docrootweb}>
            AllowOverride All
            Require all granted
        </Directory>


        Undefine server_name
        Undefine basedocroot
        Undefine docrootweb
        Undefine logdir
</VirtualHost>
